# System Bus

- 컴퓨터의 구성요소를 서로 연결하고 데이터 전달을 위한 통로
- 주소버스, 데이터 버스, 제어버스로 구성되어 있다.
    
    ![스크린샷 2023-01-05 오후 5.50.00.png](System%20Bus%205a82c79c4d2f4e8b9c4cf4d7ef72ab64/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-01-05_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.50.00.png)
    

### 주소버스

- 메모리의 주소나 I/O Unit의 포트 번호를 전달하는 통로이다.
- CPU와 Memory는 단방향으로 데이터 전달이 가능한 버스를 이용함으로써 주소 전달은 CPU에서 메모리로만 가능하다.
    - CPU → 주소버스
    - 주소버스 → Memory
- CPU, Memory는 I/O Unit과 양방향으로 데이터 전달이 가능한 버스를 사용
    - CPU, Memory ←→ I/O Unit

### 데이터 버스

- 데이터 전달을 위한 통로이다.
- 각 구성요소 (CPU, Memory, I/O Unit)은/는 양방향으로 데이터 전달이 가능한 버스를 사용

### 제어 버스

- 제어신호를 전달하기 위한 통로이다.
- Read와 Write 신호를 전달한다.
- 각 구성요소 (CPU, Memory, I/O Unit)은/는 양방향으로 데이터 전달이 가능한 버스를 사용

---

## 컴퓨터 구성 요소간 통신

### 1. CPU ←→ Memory

- 적재 (Load)와 저장 (Store) 명령에 의해 수행

### 적재 (Load)

- 주소 버스: 메모리에서 불러올 데이터가 저장된 주소 값이 전달된다. (CPU → Memory)
- 신호 버스: Memory Read 신호가 전달된다. (CPU → Memory)
- 데이터 버스: 지정한 메모리에 저장된 값을 전달된다. (Memory → CPU)

### 저장 (Store)

- 주소 버스: 메모리에서 해당 데이터를 저장할 주소 값이 전달된다. (CPU → Memory)
- 신호 버스: Memory Write 신호가 전달된다. (CPU → Memory)
- 데이터 버스: 저장할 데이터가 전달된다. (CPU → Memory)

### 2. CPU ←→ I/O Unit

- 입력(Input)과 출력(Output), 외부 인터럽트 명령에 의해 수행
- 인터럽트
    
    내부 인터럽트
    
    - 하드웨어 고장
    - 실행할 수 없는 명령어 → 명령어의 비트패턴이 저장되어 있지 않은 경우
    - 명령어 실행 오류 → 나누기 0
    - 사용 권한 위배
    
    외부 인터럽트
    
    - 보통 입출력 장치에 의해 발생된다.
    - 타이머 인터럽트 → 타이머가 특정 시간 간격으로 CPU에게 인터럽트를 요청
    - 입출력 인터럽트 → 속도가 느린 입출력 장치가 준비가 완료되었음을 알리는 요청

### 입력 (Input)

- 주소 버스: 해당 입력 장치의 포트 번호가 전달된다. ( CPU → I/O Unit)
- 신호 버스: I/O Read(input) 신호가 전달된다. (CPU → I/O Unit)
- 데이터 버스: 해당 입력 장치의 데이터가 전달된다. (I/O Unit → CPU)

### 출력 (Output)

- 주소 버스: 해당 출력 장치의 포트 번호가 전달된다. (CPU → I/O Unit)
- 신호 버스: I/O Wrtie(output) 신호가 전달된다. (CPU → I/O Unit)
- 데이터 버스: 출력 장치에 데이터가 전달된다. (CPU → I/O Unit)

### 외부 인터럽트

- 인터럽트는 제어 신호를 통해 CPU에 입출력작업을 요청할 수 있다.
- 인터럽트 요청: 입출력 준비를 마친 I/O Unit이 CPU에 작업의 시작 요청
- 인터럽트 확인: CPU가 입출력 동작을 수행할 것을 입출력 장치에 통보

### 3. Memory ←→ I/O Unit

- 입출력 장치와 메모리의 통신은 CPU를 이용하지 않고 직접 기억장치 엑세스 방식(DMA: Direct Memory Access)으로 통신한다.
- DMA 제어기는 CPU를 대신해 주소 버스와 제어버스에 신호를 전달한다.
- DMA 제어기는 통신 시작 전 CPU에 버스 사용에 대한 허가를 받아야 한다.

---

## 동기식 버스 vs 비동기식 버스

### 동기식 버스

- 동기식 버스는 정해진 시간에 데이터를 전송하는 방법이다.
- 시간은 버스가 가지고 있는 Clock을 기준으로 하며 빠르고 인터페이스 논리회로가 간단하다는 장점이 있지만, 느린 장비도 이 Clock에 맞춰야 한다는 점에서 시간낭비가 발생할 수 있다.

### 비동기식 버스

- 시간을 따로 정하지 않고, 서로 데이터를 주고 받을 준비가 되어있는지 확인하는 핸드쉐이킹 프로토콜을 사용하여 수신측에서 준비가 되었으면 바로 전송하는 방식이다.
- 따로 정해진 시간이 없기에 시간낭비가 적다는 장점이 있지만, 회로구성이 복잡하고 핸드쉐이킹 과정이 필요해서 동기식에 비해 속도가 느리다.

---

## PCle

- 버스의 특징은 공용 선이라는 것인데, 이 특징 덕분에 한 쪽이 데이터 선을 점열하면 다른 쪽에서는 신호 중첩을 유발할 수 있어 사용을 하면 안된다. 이를 보완하기 위해 점대점 상호연결방식이 등장했다.

### QPI (Quick path Interconnect)

- 다른 구성요소와 직접 연결하는 점대점 상호방식 중 하나
- 레이어로 구성된 프로토콜 구조이므로 물리적으로 연결되어 있는 부분부터 오류의 존재 여부를 점검하는 등 각각의 레이어에서 하는 일을 구분되어 있다.
- 고속, 고효율의 패킷 기반의 전송방식을 사용하며 인텔의 i7 칩셋 이후로 사용되어 지는 방식이다.

### PCle(Peripheral Component Interconnect Express)

- 예를 들자면 버스를 1:1로 매칭하여 택시로 만든 상황이다.
- 높은 용량 덕분에 기가이더넷과 같은 빠른 데이터 속도의 I/O 디바이스를 지원하는데 사용되어지며, 각각의 버스마다 독립적인 데이터 흐름을 제공하여 많이 사용되어 진다.
- 핀수가 적고 물리적 면적이 작으며 상세한 오류검출 및 보고구조 등의 장점을 가지고 있다.
- 최근엔 I/O 가상화도 지원한다.